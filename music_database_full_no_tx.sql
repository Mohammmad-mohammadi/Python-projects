-- Clean schema (no transaction wrappers)
PRAGMA foreign_keys = ON;

DROP TABLE IF EXISTS Pieces;
DROP TABLE IF EXISTS Emotions;
DROP TABLE IF EXISTS Composers;

CREATE TABLE Composers (
  composer_id INTEGER PRIMARY KEY,
  full_name TEXT NOT NULL,
  era TEXT NOT NULL,
  nationality TEXT,
  main_instrument TEXT
);

CREATE TABLE Emotions (
  emotion_id INTEGER PRIMARY KEY,
  emotion_name TEXT NOT NULL
);

CREATE TABLE Pieces (
  piece_id INTEGER PRIMARY KEY,
  name TEXT NOT NULL,
  title TEXT,
  composer_id INTEGER NOT NULL,
  era TEXT NOT NULL,
  major_scale TEXT,
  difficulty INTEGER CHECK(difficulty BETWEEN 1 AND 10),
  emotion_id INTEGER,
  type TEXT,
  FOREIGN KEY (composer_id) REFERENCES Composers(composer_id),
  FOREIGN KEY (emotion_id) REFERENCES Emotions(emotion_id)
);

-- Emotions
INSERT INTO Emotions (emotion_id, emotion_name) VALUES
(1,'Tranquility'),
(2,'Melancholy'),
(3,'Tension'),
(4,'Triumph'),
(5,'Longing');

-- Composers
INSERT INTO Composers (composer_id, full_name, era, nationality, main_instrument) VALUES
(1,'Johann Sebastian Bach','Baroque','German','Organ/Harpsichord'),
(2,'George Frideric Handel','Baroque','German/English','Harpsichord'),
(3,'Antonio Vivaldi','Baroque','Italian','Violin'),
(4,'Wolfgang Amadeus Mozart','Classical','Austrian','Piano'),
(5,'Ludwig van Beethoven','Classical','German','Piano'),
(6,'Franz Schubert','Classical','Austrian','Piano'),
(7,'Frédéric Chopin','Romantic','Polish','Piano'),
(8,'Franz Liszt','Romantic','Hungarian','Piano'),
(9,'Robert Schumann','Romantic','German','Piano'),
(10,'Johannes Brahms','Romantic','German','Piano'),
(11,'Pyotr Ilyich Tchaikovsky','Romantic','Russian','Piano'),
(12,'Felix Mendelssohn','Romantic','German','Piano/Organ'),
(13,'Edvard Grieg','Romantic','Norwegian','Piano'),
(14,'Sergei Rachmaninoff','20th Century','Russian','Piano'),
(15,'Claude Debussy','20th Century','French','Piano'),
(16,'Maurice Ravel','20th Century','French','Piano'),
(17,'Erik Satie','20th Century','French','Piano'),
(18,'Igor Stravinsky','20th Century','Russian','Piano'),
(19,'Dmitri Shostakovich','20th Century','Russian','Piano'),
(20,'Sergei Prokofiev','20th Century','Russian','Piano'),
(21,'Alexander Scriabin','20th Century','Russian','Piano'),
(22,'Philip Glass','Contemporary','American','Piano'),
(23,'Ludovico Einaudi','Contemporary','Italian','Piano'),
(24,'Arvo Pärt','Contemporary','Estonian','Piano/Organ'),
(25,'Astor Piazzolla','20th Century','Argentine','Bandoneon');

-- Pieces
INSERT INTO Pieces (piece_id, name, title, composer_id, era, major_scale, difficulty, emotion_id, type) VALUES
(1,'BWV 565 Toccata and Fugue','Toccata and Fugue in D minor',1,'Baroque','D minor',7,3,'toccata/fugue'),
(2,'BWV 846 Well-Tempered Clavier I No.1','Prelude in C',1,'Baroque','C major',3,1,'prelude'),
(3,'BWV 847 Well-Tempered Clavier I No.2','Fugue in C minor',1,'Baroque','C minor',6,3,'fugue'),
(4,'BWV 1007','Cello Suite No.1: Prelude',1,'Baroque','G major',5,1,'prelude'),
(5,'BWV 988 Goldberg Variations: Aria','Goldberg Aria',1,'Baroque','G major',7,1,'aria/variations'),
(6,'BWV 902','Fantasia and Fugue in A minor',1,'Baroque','A minor',7,3,'fantasia/fugue'),
(7,'HWV 434','Sarabande in D minor',2,'Baroque','D minor',5,2,'sarabande'),
(8,'HWV 56','Messiah: Pastoral Symphony',2,'Baroque','G major',4,1,'oratorio excerpt'),
(9,'RV 297','Four Seasons: Winter',3,'Baroque','F minor',6,3,'concerto'),
(10,'RV 269','Four Seasons: Spring',3,'Baroque','E major',6,4,'concerto'),
(11,'BWV 772','Two-Part Invention No.1',1,'Baroque','C major',4,1,'invention'),
(12,'BWV 903','Chromatic Fantasia and Fugue',1,'Baroque','D minor',8,3,'fantasia/fugue'),
(13,'BWV 858','WTC I No.13: Fugue',1,'Baroque','F-sharp major',7,3,'fugue'),
(14,'HWV 433','Suite in E: Prelude',2,'Baroque','E major',4,1,'prelude'),
(15,'K.545','Sonata facile (I)',4,'Classical','C major',3,1,'sonata'),
(16,'K.331 (III)','Rondo alla Turca',4,'Classical','A minor',5,4,'rondo'),
(17,'K.466 (II)','Piano Concerto No.20: Romance',4,'Classical','D minor',6,5,'concerto'),
(18,'K.488 (II)','Piano Concerto No.23: Adagio',4,'Classical','A major',6,2,'concerto'),
(19,'Op.13','Pathétique Sonata (II)',5,'Classical','A-flat major',6,5,'sonata'),
(20,'Op.27 No.2 (I)','Moonlight Sonata (I)',5,'Classical','C-sharp minor',5,2,'sonata'),
(21,'Op.57 (III)','Appassionata (Finale)',5,'Classical','F minor',9,3,'sonata'),
(22,'Op.53 (I)','Waldstein (I)',5,'Classical','C major',8,4,'sonata'),
(23,'Op.109 (III)','Theme and Variations',5,'Classical','E major',8,1,'sonata'),
(24,'D.960 (II)','Schubert Sonata in B♭ (II)',6,'Classical','B-flat major',7,2,'sonata'),
(25,'D.780 No.3','Moments Musicaux No.3',6,'Classical','F minor',6,2,'character piece'),
(26,'D.365 No.1','Waltz in B minor',6,'Classical','B minor',4,5,'waltz'),
(27,'K.265','Variations on Ah vous dirai-je, Maman',4,'Classical','C major',6,1,'variations'),
(28,'K.397','Fantasia in D minor',4,'Classical','D minor',6,5,'fantasia'),
(29,'Op.81a (II)','Les Adieux (Andante)',5,'Classical','E-flat major',7,5,'sonata'),
(30,'Op.31 No.2 (I)','Tempest Sonata (I)',5,'Classical','D minor',7,3,'sonata'),
(31,'D.899 No.1','Impromptu in C minor',6,'Classical','C minor',7,2,'impromptu'),
(32,'D.899 No.4','Impromptu in A-flat',6,'Classical','A-flat major',7,1,'impromptu'),
(33,'D.780 No.6','Moments Musicaux No.6',6,'Classical','A-flat major',7,5,'character piece'),
(34,'K.488 (III)','Piano Concerto No.23: Allegro assai',4,'Classical','A major',7,4,'concerto'),
(35,'Op.10 No.12','Revolutionary Étude',7,'Romantic','C minor',9,3,'etude'),
(36,'Op.10 No.4','Torrent Étude',7,'Romantic','C-sharp minor',9,3,'etude'),
(37,'Op.25 No.12','Ocean Étude',7,'Romantic','C minor',9,4,'etude'),
(38,'Op.66','Fantaisie-Impromptu',7,'Romantic','C-sharp minor',9,5,'impromptu'),
(39,'Op.9 No.2','Nocturne in E-flat',7,'Romantic','E-flat major',6,1,'nocturne'),
(40,'Op.48 No.1','Nocturne in C minor',7,'Romantic','C minor',7,2,'nocturne'),
(41,'Op.23 No.1','Ballade No.1',7,'Romantic','G minor',9,3,'ballade'),
(42,'Op.47','Ballade No.3',7,'Romantic','A-flat major',9,4,'ballade'),
(43,'Op.53','Polonaise in A♭ (Heroic)',7,'Romantic','A-flat major',9,4,'polonaise'),
(44,'S.141 No.3','La Campanella',8,'Romantic','G-sharp minor',10,3,'etude'),
(45,'S.139 No.6','Transcendental Étude: Vision',8,'Romantic','G minor',9,3,'etude'),
(46,'S.139 No.4','Mazeppa',8,'Romantic','D minor',10,4,'etude'),
(47,'S.244 No.2','Hungarian Rhapsody No.2',8,'Romantic','C-sharp minor',9,4,'rhapsody'),
(48,'Op.16 No.4','Kinderszenen: Bittendes Kind',9,'Romantic','D major',4,5,'character piece'),
(49,'Op.15 No.7','Kinderszenen: Träumerei',9,'Romantic','F major',5,1,'character piece'),
(50,'Op.54','Scherzo in E minor',9,'Romantic','E minor',8,3,'scherzo'),
(51,'Op.117 No.1','Brahms Intermezzo',10,'Romantic','E-flat major',6,2,'intermezzo'),
(52,'Op.118 No.2','Brahms Intermezzo',10,'Romantic','A major',7,5,'intermezzo'),
(53,'Op.79 No.2','Rhapsody in G minor',10,'Romantic','G minor',8,4,'rhapsody'),
(54,'Op.23 No.5','Tchaikovsky Morceaux',11,'Romantic','G minor',7,3,'character piece'),
(55,'Op.37','The Seasons: October',11,'Romantic','D minor',5,2,'character piece'),
(56,'Op.72 No.5','Meditation',11,'Romantic','D-flat major',6,5,'meditation'),
(57,'Op.62 No.6','Songs Without Words',12,'Romantic','G minor',5,2,'lyrical piece'),
(58,'Op.30 No.6','Wedding March (arr.)',12,'Romantic','C major',6,4,'arrangement'),
(59,'Op.12 No.1','Grieg Lyric: Arietta',13,'Romantic','E major',3,1,'lyric piece'),
(60,'Op.12 No.4','Grieg Lyric: Elves'' Dance',13,'Romantic','A minor',5,3,'lyric piece'),
(61,'Op.16 (I)','Grieg Piano Concerto (I)',13,'Romantic','A minor',8,4,'concerto'),
(62,'Op.9 No.1','Chopin Nocturne (B♭ minor)',7,'Romantic','B-flat minor',7,2,'nocturne'),
(63,'Op.28 No.15','Raindrop Prelude',7,'Romantic','D-flat major',5,5,'prelude'),
(64,'Op.28 No.20','Prelude in C minor',7,'Romantic','C minor',6,3,'prelude'),
(65,'Op.25 No.1','Aeolian Harp Étude',7,'Romantic','A-flat major',8,1,'etude'),
(66,'S.541','Funérailles',8,'Romantic','F minor',10,2,'character piece'),
(67,'S.144 No.12','Paganini Étude No.6',8,'Romantic','A minor',10,3,'etude'),
(68,'S.171 No.2','Consolation No.2',8,'Romantic','E major',5,1,'consolation'),
(69,'Op.39 No.2','Schumann Étude Symphonique (Var.)',9,'Romantic','E-flat minor',8,3,'etude'),
(70,'Op.119 No.1','Brahms Intermezzo',10,'Romantic','B minor',7,2,'intermezzo'),
(71,'Op.18 No.6','Tchaikovsky Romance',11,'Romantic','E-flat minor',7,5,'romance'),
(72,'Op.39 No.9','Tchaikovsky Humoresque',11,'Romantic','G major',6,4,'character piece'),
(73,'Op.35 No.22','Mendelssohn Songs Without Words',12,'Romantic','D major',5,1,'lyrical piece'),
(74,'L.75 No.3','Clair de Lune',15,'20th Century','D-flat major',6,1,'suite movement'),
(75,'Préludes I No.8','La fille aux cheveux de lin',15,'20th Century','G-flat major',5,1,'prelude'),
(76,'Préludes I No.10','La cathédrale engloutie',15,'20th Century','C major',7,5,'prelude'),
(77,'M.55','Jeux d''eau',16,'20th Century','E major',8,1,'solo piece'),
(78,'M.19','Gaspard: Ondine',16,'20th Century','C-sharp minor',10,3,'suite movement'),
(79,'Op.23 No.5','Rachmaninoff Prelude in G minor',14,'20th Century','G minor',9,4,'prelude'),
(80,'Op.32 No.12','Rachmaninoff Prelude in G-sharp minor',14,'20th Century','G-sharp minor',9,2,'prelude'),
(81,'Op.2 No.1','Scriabin Étude in C-sharp minor',21,'20th Century','C-sharp minor',8,5,'etude'),
(82,'Op.8 No.12','Scriabin Étude in D-sharp minor',21,'20th Century','D-sharp minor',10,3,'etude'),
(83,'Op.34 No.4','Scriabin Prelude',21,'20th Century','F-sharp major',7,1,'prelude'),
(84,'Op.16 No.3','Prokofiev Sarcasms',20,'20th Century','E minor',9,3,'character piece'),
(85,'Op.11 No.1','Prokofiev Toccata',20,'20th Century','D minor',10,3,'toccata'),
(86,'Petrushka arr.','Danse russe',18,'20th Century','A major',10,4,'suite arrangement'),
(87,'Gymnopédie No.1','Gymnopédie No.1',17,'20th Century','D major',2,1,'character piece'),
(88,'Gnossienne No.1','Gnossienne No.1',17,'20th Century','F minor',3,5,'character piece'),
(89,'Op.23 No.2','Rachmaninoff Prelude in B-flat',14,'20th Century','B-flat major',8,4,'prelude'),
(90,'Glassworks I','Opening',22,'Contemporary','E minor',4,1,'minimalism'),
(91,'Etudes No.2','Philip Glass Etude 2',22,'Contemporary','F minor',6,2,'etude'),
(92,'Una Mattina','Una Mattina',23,'Contemporary','A minor',3,5,'character piece'),
(93,'Nuvole Bianche','Nuvole Bianche',23,'Contemporary','F minor',4,2,'character piece'),
(94,'Spiegel im Spiegel','Spiegel im Spiegel',24,'Contemporary','A major',2,1,'chamber/minimalism'),
(95,'Fratres (piano)','Fratres (piano)',24,'Contemporary','A minor',7,3,'chamber arrangement'),
(96,'Libertango','Libertango',25,'20th Century','A minor',5,4,'tango'),
(97,'Adiós Nonino','Adiós Nonino',25,'20th Century','G minor',6,5,'tango'),
(98,'La Valse (arr.)','La Valse (piano)',16,'20th Century','A minor',9,3,'arrangement'),
(99,'Música callada I-1','Angelico',24,'Contemporary','A minor',5,1,'character piece'),
(100,'WoO 59','Für Elise',5,'Classical','A minor',4,5,'bagatelle'),
(101,'K.331 (I)','Sonata in A (Theme)',4,'Classical','A major',4,1,'sonata'),
(102,'K.310 (I)','Sonata in A minor (I)',4,'Classical','A minor',7,3,'sonata'),
(103,'BWV 850','WTC I No.5: Prelude',1,'Baroque','D major',5,1,'prelude'),
(104,'BWV 851','WTC I No.5: Fugue',1,'Baroque','D major',6,3,'fugue'),
(105,'Op.2 No.1 (I)','Beethoven Sonata No.1 (I)',5,'Classical','F minor',6,3,'sonata'),
(106,'Op.27 No.2 (III)','Moonlight Sonata (III)',5,'Classical','C-sharp minor',9,3,'sonata'),
(107,'Op.90 (II)','Beethoven Sonata No.27 (II)',5,'Classical','E minor',7,5,'sonata'),
(108,'Op.28 No.7','Chopin Prelude (A major)',7,'Romantic','A major',5,1,'prelude'),
(109,'Op.28 No.16','Chopin Prelude (B♭ minor)',7,'Romantic','B-flat minor',9,3,'prelude'),
(110,'Op.64 No.2','Waltz in C-sharp minor',7,'Romantic','C-sharp minor',6,5,'waltz'),
(111,'Op.64 No.1','Minute Waltz',7,'Romantic','D-flat major',6,4,'waltz'),
(112,'S.541 (No.3)','Liebesträume No.3',8,'Romantic','A-flat major',6,5,'nocturne'),
(113,'S.141 No.10','Transcendental Étude: Appassionata',8,'Romantic','F minor',10,3,'etude'),
(114,'Op.3 No.2','Rachmaninoff Elegie',14,'20th Century','E-flat minor',7,2,'elegie'),
(115,'Op.23 No.6','Rachmaninoff Prelude in E-flat',14,'20th Century','E-flat major',8,4,'prelude'),
(116,'Préludes I No.6','Des pas sur la neige',15,'20th Century','D minor',7,2,'prelude'),
(117,'M.18','Pavane pour une infante défunte',16,'20th Century','G major',6,5,'pavane'),
(118,'K.545 (II)','Sonata facile (II)',4,'Classical','G major',4,1,'sonata'),
(119,'BWV 904','Fugue in E minor',1,'Baroque','E minor',7,3,'fugue'),
(120,'Op.15 No.3','Grieg Lyric: Melody',13,'Romantic','A minor',4,5,'lyric piece'),
(121,'Op.32 No.10','Rachmaninoff Prelude in B minor',14,'20th Century','B minor',9,2,'prelude'),
(122,'Op.8 No.2','Scriabin Étude in F-sharp minor',21,'20th Century','F-sharp minor',8,5,'etude'),
(123,'Op.118 No.1','Brahms Intermezzo',10,'Romantic','A minor',7,2,'intermezzo'),
(124,'Op.25 No.11','Winter Wind Étude',7,'Romantic','A minor',10,3,'etude'),
(125,'Op.25 No.6','Thirds Étude',7,'Romantic','G-sharp minor',10,3,'etude'),
(126,'Op.25 No.7','Cello Étude',7,'Romantic','C-sharp minor',8,2,'etude'),
(127,'Op.10 No.3','Tristesse Étude',7,'Romantic','E major',6,5,'etude'),
(128,'S.161 No.2','Rigoletto Paraphrase',8,'Romantic','B major',10,4,'paraphrase'),
(129,'Op.39 No.1','Schumann Toccata',9,'Romantic','C major',10,3,'toccata'),
(130,'Op.72 No.14','Tchaikovsky Natha-Valse',11,'Romantic','E minor',6,5,'waltz'),
(131,'Op.10 No.1','Waterfall Étude',7,'Romantic','C major',9,4,'etude'),
(132,'Op.32 No.5','Rachmaninoff Prelude in G major',14,'20th Century','G major',8,1,'prelude'),
(133,'M.61','Ravel Sonatine (I)',16,'20th Century','F-sharp minor',8,1,'sonatine'),
(134,'Préludes II No.12','Feux d''artifice',15,'20th Century','A minor',10,3,'prelude'),
(135,'Op.11 No.3 (alt)','Prokofiev Toccata (alt)',20,'20th Century','D minor',10,3,'toccata'),
(136,'K.488 (I)','Piano Concerto No.23 (I)',4,'Classical','A major',8,4,'concerto'),
(137,'D.365 No.2','Schubert Waltz in C-sharp minor',6,'Classical','C-sharp minor',4,5,'waltz');
